# DATASET PREPROCESSING CONFIGURATION
base_config:
  - configs/tts/fs2.yaml
  - configs/singing/base.yaml
  - ./base.yaml

audio_sample_rate: 24000
hop_size: 128            # Hop size.
fft_size: 512           # FFT size.
win_size: 512           # FFT size.
fmin: 30
fmax: 12000
min_level_db: -120

binarization_args:
  with_wav: true
  with_spk_embed: false
  with_align: true

# CHANGE ACCORDINGLY
raw_data_dir: 'data/raw/vietsing'
processed_data_dir: 'xxx' # input folder (can be more than 1)
binary_data_dir: 'data/binary/vietsing-bin' # binary output folder
num_spk: 1
datasets: [
  'vietsing',
]
test_prefixes: [
    '2021',
    '2026',
    '2034'
]

spec_min: [-17.65333366394043, -17.65333366394043, -17.65333366394043, -17.65333366394043, -17.642620086669922, -17.60570526123047, -17.65333366394043, -17.65333366394043, -17.65333366394043, -17.65333366394043, -17.65333366394043, -17.65333366394043, -17.65333366394043, -17.648509979248047, -17.600364685058594, -17.65333366394043, -17.65333366394043, -17.65333366394043, -17.65333366394043, -17.65333366394043, -17.65333366394043, -17.65333366394043, -17.64419937133789, -17.637361526489258, -17.637529373168945, -17.63888168334961, -17.64228630065918, -17.647470474243164, -17.654211044311523, -17.66231918334961, -17.648181915283203, -17.616397857666016, -17.6828556060791, -17.61962127685547, -17.67510414123535, -17.618000030517578, -17.666391372680664, -17.654197692871094, -17.628629684448242, -17.65043067932129, -17.64976692199707, -17.64988136291504, -17.643041610717773, -17.640586853027344, -17.655357360839844, -17.643123626708984, -17.650901794433594, -17.639558792114258, -17.650373458862305, -17.646997451782227, -17.6463565826416, -17.64804458618164, -17.647329330444336, -17.64257049560547, -17.64921760559082, -17.647693634033203, -17.645339965820312, -17.645566940307617, -17.647998809814453, -17.646547317504883, -17.64821434020996, -17.645339965820312, -17.645172119140625, -17.647199630737305, -17.647624969482422, -17.64670181274414, -17.64582633972168, -17.647314071655273, -17.646163940429688, -17.64696502685547, -17.647045135498047, -17.64595603942871, -17.646995544433594, -17.646833419799805, -17.64630699157715, -17.64682388305664, -17.647279739379883, -17.645856857299805, -17.64671516418457, -17.647132873535156]
spec_max: [-1.7144159078598022, -1.3401492834091187, -0.7969956994056702, -0.3173673450946808, -0.011272269301116467, 0.22519899904727936, 0.26889124512672424, 0.30053210258483887, 0.14180444180965424, 0.0008397050551138818, -0.04902851581573486, 0.0036906783934682608, 0.1456747055053711, 0.19744326174259186, 0.1518142819404602, -0.08872850984334946, -0.2405581921339035, -0.24600262939929962, -0.21086105704307556, -0.22292257845401764, -0.1897856742143631, -0.19523292779922485, -0.3059069514274597, -0.02540126070380211, -0.07535893470048904, -0.18052376806735992, -0.2138139307498932, -0.15834999084472656, -0.21699440479278564, -0.28618356585502625, -0.3713342249393463, -0.39165064692497253, -0.4051581025123596, -0.3070354461669922, -0.5391690731048584, -0.5757545232772827, -0.6070114970207214, -0.6474586725234985, -0.6739010810852051, -0.684052050113678, -0.5567854046821594, -0.8687626719474792, -0.8528288006782532, -0.8590739369392395, -0.9074874520301819, -1.005690336227417, -1.1091407537460327, -0.8994482755661011, -0.9771605134010315, -0.9542311429977417, -1.1457092761993408, -1.4033238887786865, -1.4252289533615112, -1.3249375820159912, -1.1758078336715698, -1.197473406791687, -1.3291938304901123, -1.407244086265564, -1.4595658779144287, -1.5286204814910889, -1.580594539642334, -1.6044601202011108, -1.5743200778961182, -1.4007471799850464, -1.4626494646072388, -1.5206602811813354, -1.490256667137146, -1.572681188583374, -1.4059139490127563, -1.391094446182251, -1.1696810722351074, -1.2407528162002563, -1.195377230644226, -1.255347490310669, -1.385430932044983, -1.432763934135437, -1.3383954763412476, -1.4667598009109497, -1.8758012056350708, -2.000000238418579]

task_cls: usr.diffsinger_task.DiffSingerTask
#vocoder: usr.singingvocoder.highgan.HighGAN
#vocoder_ckpt: checkpoints/h_2_model/checkpoint-530000steps.pkl
vocoder: vocoders.hifigan.HifiGAN
vocoder_ckpt: checkpoints/0109_hifigan_bigpopcs_hop128 # CHANGE ACCORDINGLY

pitch_extractor: 'parselmouth'
# config for experiments
use_spk_embed: false
num_valid_plots: 10
max_updates: 160000
lr: 0.001
timesteps: 100
K_step: 51
diff_loss_type: l1
diff_decoder_type: 'wavenet'
schedule_type: 'linear'
max_beta: 0.06
fs2_ckpt: ''
use_nsf: true